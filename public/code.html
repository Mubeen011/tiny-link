<!doctype html>
<html>
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TinyLink - Stats</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 p-4">
  <div class="max-w-2xl mx-auto bg-white p-4 rounded shadow">
    <a href="/" class="text-sm text-blue-600">‚Üê Back</a>
    <h1 id="title" class="text-xl font-semibold mt-2">Stats</h1>
    <div id="container" class="mt-4">
      Loading...
    </div>
  </div>
  <script>
    async function load() {
      const path = location.pathname;
      const code = path.split('/').pop();
      const res = await fetch('/api/links/' + code);
      const container = document.getElementById('container');
      if (res.status === 404) {
        container.innerHTML = '<div class="text-red-500">Not found</div>';
        return;
      }
      const j = await res.json();
      container.innerHTML = `
        <div><strong>Code:</strong> ${j.code}</div>
        <div class="mt-2"><strong>Target URL:</strong> <a class="text-blue-600" href="${j.url}" target="_blank">${j.url}</a></div>
        <div class="mt-2"><strong>Clicks:</strong> ${j.clicks}</div>
        <div class="mt-2"><strong>Last clicked:</strong> ${j.lastClicked ? new Date(j.lastClicked).toLocaleString() : "-"}</div>
        <div class="mt-2"><strong>Created:</strong> ${new Date(j.createdAt).toLocaleString()}</div>
      `;
    }
    load();
  </script>
</body>
</html>
